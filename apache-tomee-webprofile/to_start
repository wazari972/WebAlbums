#! /bin/sh
TOMEE_HOME=$(dirname $0)

while [[ $# > 0 ]]
do
  key=$1
  case $key in
    -v|--verbose)
    LOGGING="-Djava.util.logging.config.file=$TOMEE_HOME/conf/logging.properties \
             -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager"
    shift
    ;;
    -cp|--copy)
    cd $TOMEE_HOME
    sh ./to_copy
    cd -
    shift
    ;;
    *)
    # unknown option
    ;;
  esac

done
exit

CP=\
$TOMEE_HOME/bin/bootstrap.jar:\
$TOMEE_HOME/bin/tomcat-juli.jar:\
$TOMEE_HOME/lib/jandex-1.2.0.Final.jar

java -Djava.security.auth.login.config=$TOMEE_HOME/conf/login.config           \
     -Dopenejb.authentication.realmName=PropertiesLogin                        \
      $LOGGING                                                                 \
     -Djava.endorsed.dirs=$TOMEE_HOME/endorsed                                 \
     -classpath $CP                                                            \
     -Dcatalina.base=$TOMEE_HOME                                               \
     -Dcatalina.home=$TOMEE_HOME                                               \
     -Droot.path=$(cat $TOMEE_HOME/conf/root.path)                             \
org.apache.catalina.startup.Bootstrap start 
